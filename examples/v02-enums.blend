// Blend65 v0.2 Example: Enum Declarations
// Demonstrates enum usage for game development

module Enums.Examples
import setSpriteColor from c64.sprites
import playNote from c64.sound

// Example 1: Game state management with explicit values
enum GameState
  LOADING = 0,
  MENU = 1,
  PLAYING = 2,
  PAUSED = 3,
  GAME_OVER = 4
end enum

// Example 2: Direction enum with auto-increment
enum Direction
  UP, DOWN, LEFT, RIGHT
end enum

// Example 3: Color constants for C64
enum C64Color
  BLACK = 0,
  WHITE = 1,
  RED = 2,
  CYAN = 3,
  PURPLE = 4,
  GREEN = 5,
  BLUE = 6,
  YELLOW = 7,
  ORANGE = 8,
  BROWN = 9,
  LIGHT_RED = 10,
  DARK_GRAY = 11,
  GRAY = 12,
  LIGHT_GREEN = 13,
  LIGHT_BLUE = 14,
  LIGHT_GRAY = 15
end enum

// Example 4: Sound effects with mixed values
enum SoundEffect
  JUMP = 100,
  SHOOT,     // 101
  EXPLODE,   // 102
  POWERUP = 200,
  COIN,      // 201
  DEATH = 255
end enum

// Example 5: Exported enum for other modules
export enum PlayerAction
  IDLE = 0,
  WALKING,
  RUNNING,
  JUMPING,
  SHOOTING,
  CROUCHING
end enum

// Global state using enums
var currentState: GameState = GameState.LOADING
var playerDirection: Direction = Direction.RIGHT
var playerColor: C64Color = C64Color.WHITE

// Function using enum values in expressions
function changePlayerDirection(newDir: Direction): void
  // Validate direction change
  if newDir == Direction.UP or newDir == Direction.DOWN then
    playerDirection = newDir
  end if

  if newDir == Direction.LEFT or newDir == Direction.RIGHT then
    playerDirection = newDir
  end if
end function

// Function using enum in array indexing
function setPlayerSprite(): void
  var spriteIndex: byte = playerDirection  // Enum used as array index
  setSpriteColor(0, C64Color.WHITE)
end function

// Function demonstrating enum comparisons
function updateGameState(): void
  if currentState == GameState.LOADING then
    // Initialize game
    currentState = GameState.MENU
  end if

  if currentState == GameState.PLAYING then
    // Game logic
    if playerHealth <= 0 then
      currentState = GameState.GAME_OVER
    end if
  end if
end function

// Function using enum values in calculations
function playSound(effect: SoundEffect): void
  var frequency: byte = effect  // Enum value used directly
  playNote(frequency)
end function

// Function demonstrating enum arithmetic
function getOppositeDirection(dir: Direction): Direction
  if dir == Direction.UP then
    return Direction.DOWN
  end if

  if dir == Direction.DOWN then
    return Direction.UP
  end if

  if dir == Direction.LEFT then
    return Direction.RIGHT
  end if

  if dir == Direction.RIGHT then
    return Direction.LEFT
  end if

  return Direction.UP  // Default fallback
end function

export function main(): void
  currentState = GameState.MENU

  while currentState != GameState.GAME_OVER
    updateGameState()

    if currentState == GameState.PLAYING then
      setPlayerSprite()
      playSound(SoundEffect.JUMP)
    end if
  end while
end function
